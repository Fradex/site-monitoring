# site-monitoring
Компоненты:
1. Сервис мониторинга
2. Веб приложение для отображения доступности сайтов.

Описание компонентов:
1. Сервис мониторинга
Веб-апи сервис для переодического опроса сайтов.
Список сайтов периодически синхронизируется с базой сайтов, которая ведется на стороне веб-приложения.
Периодичность выполнения задач реализована через Hangfire. Для отслеживания каждого сайта запускается отдельная задача.

Админка хенгфайера доступна по адресу https://адрес_сервиса/jobs
Реализация на .Net Core 2.1

2. Веб-приложение
Веб приложение для отображения доступности сайтов.
Доступны 2 режима: для обычных пользователей и администраторов.

Для обычных пользователей доступно лишь отображаение доступности сайтов в виде списочного предсталения карточек.
Доступен фильтр по 3, 5, 10, 15 записей. Сортировка/Фильтрация отсутствуют.

!!!Для данного режима достпен только 1 пользователь - admin/admin.
Для админов доступно отображаение доступности сайтов в виде списочного предсталения, возможности добавлять/изменять/удалять записи, также возможно изменять время опроса выполяемое сервисом.
Доступен фильтр по 3, 5, 10, 15 записей. Сортировка/Фильтрация отсутствуют.
Реализация на .Net Core 2.1 + Angular5 + EF Core 2.1
Для БД изпользован LocalDb.

Взаимодействие компонентов:
Веб приложение <-> Сервис мониторинга по http/https (rest api).

Настройка запуска приложения:

Для решения:
1. Локальный компьтер (решение в ветке master):
Указать Multiple Startup Projects и выбрать проекты SiteMonitoring и SiteMonitoring.Service. 
2. Docker-compose (решение в ветке docker-branch):
Выбрать запускаемым проектом docker-compose.dcproj. 

Для проектов: 

1. Для проекта SiteMonitoring
 Настроить appsettings.json указав значения для:
  1.1 в случае хостинга и запуска на локалке:
  "Hosts": {
    "SiteMonitoring.Service": "https://localhost:44381/"
  },
  "ConnectionStrings": {
    "DbContext": Строка подключения к БД MS SQL, либо LocalDB
  }.
1.2 в случае докер контейнера:
 "Hosts": {
    "SiteMonitoring.Service": "https://<ip хоста>:44381/" - урл по которому развернут сервис SiteMonitoring.Service
  },
  "ConnectionStrings": {
    "DbContext": Подключениние либо к БД MS SQL, либо к контейнеру db - "Server=db;Database=master;User=sa;Password=Your_password123;"
  }.
 2. Для проекта SiteMonitoring.Service
 Настроить appsettings.json указав значения для:
  1.1 в случае хостинга и запуска на локалке:
  "Hosts": {
    "SiteMonitoring.Service": "https://localhost:44350/" - урл по которому развернут сервис SiteMonitoring
  },
  1.2 в случае докер контейнера:
 "Hosts": {
    "SiteMonitoring.Service": "https://<ip хоста>:44350/"
  }.
